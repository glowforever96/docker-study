# 2. ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆ

## ì´ë¯¸ì§€

ì„œë²„ì—ì„œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„  ì†Œí”„íŠ¸ì›¨ì–´ì ìœ¼ë¡œ ì„¸ ê°€ì§€ê°€ í•„ìš”

1. ê¸°ë³¸ OS
2. í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ êµ¬ì„± ìš”ì†Œ (Lib, Confâ€¦)
3. ì‹¤í–‰ì‹œí‚¬ í”„ë¡œê·¸ë¨

<aside>
ğŸ’¡ Nginx ì›¹ì„œë²„ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í–ˆì„ ë•Œ ì†Œí”„íŠ¸ì›¨ì–´ì— í•„ìš”í•œ ì˜ì¡´ ìš”ì†Œë¥¼ ì„¤ì¹˜í•˜ëŠ” ê³¼ì •ì—†ì´ ì–´ë–»ê²Œ í•œë²ˆì— Nginx í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í• ìˆ˜ ìˆì—ˆì„ê¹Œ?

</aside>

**â†’ Nginx ì´ë¯¸ì§€ë¥¼ í†µí•´ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í–ˆê¸° ë•Œë¬¸**

**ì´ë¯¸ì§€ : íŒŒì¼ ì‹œìŠ¤í…œì— íŠ¹ì • ì‹œì ì„ ì €ì¥í•´ ë†“ì€ ì••ì¶• íŒŒì¼**

- ì´ë¯¸ì§€ëŠ” ì œì‘ ë‹¨ê³„ì—ì„œë¶€í„° ì†Œí”„íŠ¸ì›¨ì–´ ë¿ë§Œ ì•„ë‹Œ ì‹¤í–‰í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ëª¨ë“  ìš”ì†Œë“¤ì„ ë¯¸ë¦¬ ì¤€ë¹„í•´ ì••ì¶•
- ì»¨í…Œì´ë„ˆì˜ ì´ë¯¸ì§€ëŠ” ë°±ì—…ì´ë‚˜ ìŠ¤ëƒ…ìƒ·ë³´ë‹¤ ì••ì¶•íŒŒì¼ì˜ ì‚¬ì´ì¦ˆê°€ ì•„ì£¼ ì‘ìŒ
- ì´ë¯¸ì§€ëŠ” Nginx ì´ë¯¸ì§€ì²˜ëŸ¼ ë‹¤ë¥¸ ì‚¬ëŒì´ ë§Œë“  ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ ë°›ì•„ ì‚¬ìš© ê°€ëŠ¥
- ì§ì ‘ ì´ë¯¸ì§€ë¥¼ ì œì‘ë„ ê°€ëŠ¥

## ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆ

**ì´ë¯¸ì§€**

- ì‹¤í–‰ ê°€ëŠ¥í•œ ì†Œí”„íŠ¸ì›¨ì–´ + ì‹¤í–‰ì— í•„ìš”í•œ í™˜ê²½
- ë””ìŠ¤í¬ ê³µê°„ ì°¨ì§€

**ì»¨í…Œì´ë„ˆ**

- ì‹¤í–‰ ìƒíƒœì˜ ì´ë¯¸ì§€
- ì´ë¯¸ì§€ 1 : N ì»¨í…Œì´ë„ˆ
- ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰ì‹œ CPU, MEM ë“±ì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©
- ì»¨í…Œì´ë„ˆê°„ ë¦¬ì†ŒìŠ¤ ê²©ë¦¬
- ì‹¤í–‰ ì‹œ ì´ë¯¸ì§€ë¥¼ ë³µì‚¬í•´ ê²©ë¦¬ëœ ë””ìŠ¤í¬ ê³µê°„ ìƒì„±
- ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ í”„ë¡œì„¸ìŠ¤ë„ í•¨ê»˜ ì‹¤í–‰

1. **ë„ì»¤ ì´ë¯¸ì§€ ì¡°íšŒ**

```docker
docker image ls (ì´ë¯¸ì§€ëª…)
```

![1](https://github.com/boyfromthewell/docker-study/assets/86250281/a8219537-d6ef-4726-892a-6949741166c3)

ì˜ˆì‹œ)

```docker
docker image ls nginx
```

ì—¬ëŸ¬ê°œì˜ ì´ë¯¸ì§€ê°€ ìˆì„ë•Œ nginx ì´ë¯¸ì§€ë§Œ ì¡°íšŒ ê°€ëŠ¥

- repository : ì´ë¯¸ì§€ ì´ë¦„
- tag : ì´ë¯¸ì§€ì˜ ë²„ì „
- image id : ì´ë¯¸ì§€ì˜ ê³ ìœ í•œ ì•„ì´ë””

2. **í•˜ë‚˜ì˜ ì´ë¯¸ì§€ë¡œ ì—¬ëŸ¬ ì»¨í…Œì´ë„ˆ ì‹¤í–‰**

```docker
docker run -d --name {ì»¨í…Œì´ë„ˆëª…} ì´ë¯¸ì§€ëª…
```

- -d : ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ê°€ í„°ë¯¸ë„ì„ ì ìœ í•˜ì§€ ì•Šê³  ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰

ì˜ˆì‹œ)

```docker
docker run -d --name multinginx1 nginx
docker run -d --name multinginx2 nginx
docker run -d --name multinginx3 nginx
```

3. **ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ**

```docker
docker ps
```

![2](https://github.com/boyfromthewell/docker-study/assets/86250281/0c033191-b82f-4201-8a95-7ac31698d83d)


4. **ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì‚­ì œ**

```docker
docker rm -f
```

![3](https://github.com/boyfromthewell/docker-study/assets/86250281/cf0e02a2-ed1e-48d6-bd61-9a7db1250cba)

ì—¬ëŸ¬ê°œì˜ ì»¨í…Œì´ë„ˆë„ í•œë²ˆì— ì‚­ì œ ê°€ëŠ¥

## ì´ë¯¸ì§€ì˜ ë©”íƒ€ë°ì´í„°(Metadata)

ë©”íƒ€ë°ì´í„° : ë°ì´í„°ì— ëŒ€í•œ ë°ì´í„° â†’ ì´ë¯¸ì§€ì— ëŒ€í•œ ì •ë³´ë¥¼ ê¸°ìˆ í•˜ëŠ” ë°ì´í„°

**í•˜ë‚˜ì˜ ì´ë¯¸ì§€ëŠ” ì‹¤ì œë¡œ ì••ì¶•ëœ íŒŒì¼ê³¼ íŒŒì¼ì˜ ì •ë³´ê°€ ì €ì¥ëœ ë©”íƒ€ë°ì´í„°ë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒ**

ì´ë¯¸ì§€ ì•„ì´ë””ì™€ ì´ë¦„, íŒŒì¼ ì‚¬ì´ì¦ˆ ë“±ì˜ ì •ë³´ê°€ ë‹´ê¹€, ì¤‘ìš”í•œê±´ envì™€ cmd í•„ë“œ

- env : ì†Œí”„íŠ¸ì›¨ì–´ê°€ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©í•  ì„¤ì • ì •ë³´
- cmd : ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ í”„ë¡œì„¸ìŠ¤ ì‹¤í–‰ ëª…ë ¹ì–´ ì§€ì •
    - ì´ë¯¸ì§€ë¥¼ ì»¨í…Œì´ë„ˆë¡œ ì‹¤í–‰í•  ë•Œ CMDì— ìˆëŠ” ëª…ë ¹ì–´ë¥¼ í†µí•´ ì–´ë–¤ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í• ì§€ë¥¼ ë©”íƒ€ë°ì´í„°ì—ì„œ ê²°ì •
- ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•  ë•Œ ìƒˆë¡œìš´ ê°’ìœ¼ë¡œ ë®ì–´ ì“°ê¸°ë„ ê°€ëŠ¥

1. **ì´ë¯¸ì§€ì˜ ì„¸ë¶€ ì •ë³´ ì¡°íšŒ**

```docker
docker image inspect ì´ë¯¸ì§€ëª…
```

ì˜ˆì‹œ)

```docker
docker image inspect nginx
```

![4](https://github.com/boyfromthewell/docker-study/assets/86250281/b7c60e69-2280-4313-9979-113a03048eaa)

2. **ì»¨í…Œì´ë„ˆì˜ ì„¸ë¶€ ì •ë³´ ì¡°íšŒ**

```docker
docker container inspect ì»¨í…Œì´ë„ˆëª…
```

ì˜ˆì‹œ)

```docker
docker container inspect defaultCmd
```

![5](https://github.com/boyfromthewell/docker-study/assets/86250281/4c6d31f4-6844-4b28-8087-4fd37b2be86b)

3. **ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ë©”íƒ€ë°ì´í„°ì˜ cmd ë®ì–´ì“°ê¸°**

```docker
docker run ì´ë¯¸ì§€ëª… (ì‹¤í–‰ëª…ë ¹)
```

ì˜ˆì‹œ)

```docker
docker run --name customCmd nginx cat usr/share/nginx/html/index.html
```

![6](https://github.com/boyfromthewell/docker-study/assets/86250281/f4e6cd45-1808-4b26-8523-eb742ef01811)

ì´ë•Œ  docker ps ëª…ë ¹ì–´ë¡œ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆë“¤ì„ ì‚´í´ë³´ë©´ customCmdëŠ” ë³´ì´ì§€ ì•ŠìŒ â†’ cat ëª…ë ¹ì–´ëŠ” ì¼íšŒì„± í”„ë¡œì„¸ìŠ¤, ëª…ë ¹ì´ ì¢…ë£Œë˜ëŠ” ìˆœê°„ ì»¨í…Œì´ë„ˆë„ í•¨ê»˜ ì¢…ë£Œ

- `docker ps -a` : ì¢…ë£Œëœ ì»¨í…Œì´ë„ˆ í¬í•¨ ëª¨ë“  ì»¨í…Œì´ë„ˆ ì¡°íšŒ

<aside>
ğŸ’¡ **docker run -d ì´ë¯¸ì§€ëª… (ì»¨í…Œì´ë„ˆ ë°±ê·¸ë¼ìš´ë“œ ì‹¤í–‰)**
- d ì˜µì…˜ ì¶”ê°€ì‹œ : ì§€ì†ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ë°ëª¬ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ë•Œ ì í•©
- d ì˜µì…˜ ì œê±°ì‹œ : ì‹¤í–‰ í›„ ì¢…ë£Œë˜ëŠ” í”„ë¡œê·¸ë¨ì— ì í•©, ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸í•  ê²½ìš°

</aside>

- docker pull ì´ë¯¸ì§€ëª… : ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

1. **ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ë©”íƒ€ë°ì´í„°ì˜ env ë®ì–´ì“°ê¸°**

```docker
docker run --env KEY=VALUE ì´ë¯¸ì§€ëª…
```

ì˜ˆì‹œ)

ê¸°ë³¸ ì´ë¯¸ì§€ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•´ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```docker
docker run -d -p 8080:3000 --name defaultColorApp devwikirepo/envnodecolorapp
```

![7](https://github.com/boyfromthewell/docker-study/assets/86250281/b7ec8a16-f052-4f8d-b3c9-9729135879cf)

ìƒˆë¡­ê²Œ env í•„ë“œë¥¼ ë®ì–´ì“°ê¸°í•œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```docker
docker run -d -p 8081:3000 --name blueColorApp --env COLOR=blue devwikirepo/envnodecolorapp
```

ì´ë¯¸ì§€ ë©”íƒ€ë°ì´í„° env í•„ë“œì˜ COLORê°’ì´ blueë¡œ ë°”ë€œ

![8](https://github.com/boyfromthewell/docker-study/assets/86250281/07569ab9-65ee-400b-bfe2-bbffd6dee6cd)

## ì»¨í…Œì´ë„ˆì˜ ë¼ì´í”„ì‚¬ì´í´

ì»¨í…Œì´ë„ˆì˜ ë¼ì´í”„ì‚¬ì´í´ì€ í¬ê²Œ ìƒì„±, ì‹¤í–‰, ì •ì§€, ì¢…ë£Œ, ì‚­ì œë¡œ ë‚˜ëˆ„ì–´ì§

![9](https://github.com/boyfromthewell/docker-study/assets/86250281/6f967a4a-6170-44f7-bd55-e763ab2ac4db)

1. **ì»¨í…Œì´ë„ˆì˜ ë¡œê·¸ ì¡°íšŒ**

```docker
docker logs (ì»¨í…Œì´ë„ˆëª…) - ì¼íšŒì„± ë¡œê·¸ ì¶œë ¥
docker logs -f (ì»¨í…Œì´ë„ˆëª…) - ë¡œê·¸ ê³„ì† ì¶œë ¥
```

ì˜ˆì‹œ)

```docker
docker create --name tencounter deviwkikrepo/tencounter
docker ps -a
```

![10](https://github.com/boyfromthewell/docker-study/assets/86250281/b93e664c-2a69-498e-9959-d767540961eb)

tencounterê°€ created ìƒíƒœ

```docker
docker start tencounter
```

![11](https://github.com/boyfromthewell/docker-study/assets/86250281/c60ffbbd-ae9c-42a8-b7f2-f96357c2301f)

tencounterê°€ ì‹¤í–‰(up) ìƒíƒœ

```docker
docker start -i tencounter
```

ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰ ë° ì¶œë ¥ ì—°ê²°

![12](https://github.com/boyfromthewell/docker-study/assets/86250281/24e98a5a-6b6f-4f1c-9f74-76d84460fd77)

```docker
docker pause hundredcounter
```

![13](https://github.com/boyfromthewell/docker-study/assets/86250281/8329c1dd-8a02-4c16-8295-7d5250b6d7b1)

ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¼ì‹œì •ì§€ â†’ cpuëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ ìƒíƒœê°€ ë©”ëª¨ë¦¬ì— ê·¸ëŒ€ë¡œ ì €ì¥

```docker
docker unpause hundredcounter
```

ì¼ì§€ì •ì§€ ì»¨í…Œì´ë„ˆ ì¬ì‹¤í–‰

```docker
docker stop hundredcounter
```

ì»¨í…Œì´ë„ˆ ì¢…ë£Œ ëª…ë ¹ (10ì´ˆë’¤ì— ì¢…ë£Œ)
